<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ±æµ·ç‰§å ´å‹•ç¦è›‹ | æ±æµ·å¤§å­¸å¯¦ç¿’è¾²ç‰§å ´</title>
    <!-- è¼‰å…¥ Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* è¨­å®šç¶²é çš„é è¨­å­—é«”ç‚º Inter */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F8F8F8; /* æ·ºç°è‰²èƒŒæ™¯ */
        }
        .tts-button:active {
            transform: scale(0.95);
        }
    </style>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'egg-yellow': '#FFC700',
                        'farm-green': '#4CAF50',
                        'cream-white': '#FFFDF9',
                    }
                }
            }
        }
        
        /**
         * è™•ç† Email è¨‚é–±è¡¨å–®çš„æäº¤ (æ¨¡æ“¬)
         */
        function submitInterestForm() {
            const emailInput = document.getElementById('interest-email');
            const messageDiv = document.getElementById('interest-message');
            const email = emailInput.value.trim();

            // ç°¡å–®çš„ Email æ ¼å¼æª¢æŸ¥
            if (!email || !email.includes('@') || !email.includes('.')) {
                messageDiv.className = 'mt-3 text-sm text-red-500';
                messageDiv.textContent = 'è«‹è¼¸å…¥æœ‰æ•ˆçš„é›»å­éƒµä»¶åœ°å€ã€‚';
                return;
            }

            // æ¨¡æ“¬å„²å­˜æˆåŠŸ
            messageDiv.className = 'mt-3 text-sm text-farm-green font-semibold';
            messageDiv.textContent = `æ„Ÿè¬æ‚¨çš„è¨‚é–± ( ${email} )ï¼æˆ‘å€‘å°‡ç™¼é€æœ€æ–°è³‡è¨Šçµ¦æ‚¨ã€‚`;
            emailInput.value = ''; // æ¸…ç©ºè¼¸å…¥æ¬„ä½
        }

        /**
         * è™•ç†åŠ å…¥è³¼ç‰©è»Šçš„é»æ“Š (æ¨¡æ“¬)
         */
        function addToCart(productKey) {
            const messageBox = document.getElementById('cart-message');
            let productName = '';
            
            if (productKey === 'single') {
                productName = 'ä¸€ç›’ (10 é¡†) NT$ 110';
            } else if (productKey === 'bundle') {
                productName = 'äº”ç›’ (50 é¡†) NT$ 500 å„ªæƒ çµ„';
            } else {
                productName = 'ç”¢å“';
            }

            messageBox.textContent = `æˆåŠŸå°‡ ${productName} åŠ å…¥è³¼ç‰©è»Š (æ¨¡æ“¬æ“ä½œ)ã€‚`;
            messageBox.className = 'mt-4 p-3 bg-egg-yellow text-gray-900 rounded-lg text-sm font-semibold text-center transition duration-300 opacity-100';
            
            // è¨Šæ¯é¡¯ç¤º 3 ç§’å¾Œæ¶ˆå¤±
            setTimeout(() => {
                messageBox.className = 'mt-4 opacity-0 transition duration-500';
                messageBox.textContent = '';
            }, 3000);
        }

        /**
         * è™•ç†é¡§å®¢å›é¥‹æäº¤ (æ¨¡æ“¬)
         */
        function submitTestimonial(event) {
            event.preventDefault();
            const nameInput = document.getElementById('feedback-name');
            const contentInput = document.getElementById('feedback-content');
            const messageDiv = document.getElementById('testimonial-message');
            const submitBtn = document.getElementById('feedback-submit-btn');

            const name = nameInput.value.trim();
            const content = contentInput.value.trim();

            if (!name || !content) {
                messageDiv.className = 'mt-4 text-sm font-semibold text-red-500';
                messageDiv.textContent = 'è«‹å¡«å¯«æ‚¨çš„æš±ç¨±å’Œå›é¥‹å…§å®¹ï¼';
                return;
            }

            submitBtn.disabled = true;
            submitBtn.textContent = 'é€å‡ºä¸­...';

            // æ¨¡æ“¬ç•°æ­¥æäº¤
            setTimeout(() => {
                messageDiv.className = 'mt-4 text-sm font-semibold text-farm-green';
                messageDiv.textContent = `æ„Ÿè¬ ${name}ï¼æ‚¨çš„å¯¶è²´å›é¥‹å·²ç¶“æˆåŠŸæ”¶åˆ°ï¼Œæˆ‘å€‘å°‡ç›¡å¿«å¯©æ ¸ã€‚`;
                
                nameInput.value = '';
                contentInput.value = '';
                
                submitBtn.disabled = false;
                submitBtn.textContent = 'é€å‡ºå›é¥‹';
            }, 1500);
        }

        // --- Gemini API Setup ---
        const apiKey = ""; // Canvas will provide this key if empty
        const RECIPE_MODEL = 'gemini-2.5-flash-preview-09-2025';
        const TTS_MODEL = 'gemini-2.5-flash-preview-tts';

        /**
         * Converts base64 PCM audio data to a playable WAV Blob.
         * @param {string} base64Data - Base64 encoded audio data.
         * @returns {Blob} WAV audio blob.
         */
        function base64ToArrayBuffer(base64) {
            const binaryString = atob(base64);
            const len = binaryString.length;
            const bytes = new Uint8Array(len);
            for (let i = 0; i < len; i++) {
                bytes[i] = binaryString.charCodeAt(i);
            }
            return bytes.buffer;
        }

        /**
         * Converts PCM 16-bit audio data buffer into a WAV file blob.
         * @param {Int16Array} pcm16 - The PCM data.
         * @param {number} sampleRate - The sample rate.
         * @returns {Blob} The WAV Blob.
         */
        function pcmToWav(pcm16, sampleRate) {
            const numChannels = 1;
            const bytesPerSample = 2; // 16-bit
            const buffer = pcm16.buffer;
            const view = new DataView(buffer);
            
            // Calculate necessary buffer sizes
            const dataLength = view.byteLength;
            const wavSize = 44 + dataLength; // 44 bytes for WAV header

            const arrayBuffer = new ArrayBuffer(wavSize);
            const dataView = new DataView(arrayBuffer);

            // Write WAV header (44 bytes)
            // RIFF chunk
            dataView.setUint32(0, 0x52494646, false); // "RIFF"
            dataView.setUint32(4, wavSize - 8, true); // ChunkSize
            dataView.setUint32(8, 0x57415645, false); // "WAVE"

            // FMT sub-chunk
            dataView.setUint32(12, 0x666d7420, false); // "fmt "
            dataView.setUint32(16, 16, true);          // Subchunk1Size (16 for PCM)
            dataView.setUint16(20, 1, true);           // AudioFormat (1 for PCM)
            dataView.setUint16(22, numChannels, true); // NumChannels
            dataView.setUint32(24, sampleRate, true);  // SampleRate
            dataView.setUint32(28, sampleRate * numChannels * bytesPerSample, true); // ByteRate
            dataView.setUint16(32, numChannels * bytesPerSample, true);              // BlockAlign
            dataView.setUint16(34, bytesPerSample * 8, true); // BitsPerSample (16)

            // DATA sub-chunk
            dataView.setUint32(36, 0x64617461, false); // "data"
            dataView.setUint32(40, dataLength, true);  // Subchunk2Size

            // Write PCM data
            for (let i = 0; i < pcm16.length; i++) {
                dataView.setInt16(44 + i * 2, pcm16[i], true);
            }

            return new Blob([dataView], { type: 'audio/wav' });
        }

        /**
         * TTS Generation and Playback
         */
        let audioContext = null;
        let isPlaying = false;
        
        async function generateAndPlayTTS() {
            const button = document.getElementById('tts-button');
            const originalText = button.textContent;
            
            if (isPlaying) {
                // Stop playback if already playing
                if (audioContext) {
                    audioContext.close();
                    audioContext = null;
                }
                isPlaying = false;
                button.textContent = 'ğŸ—£ï¸ è½å–ç”¢å“ç°¡ä»‹';
                button.classList.remove('bg-red-500', 'hover:bg-red-600');
                button.classList.add('bg-farm-green', 'hover:bg-green-600');
                return;
            }

            // Text to be spoken (taken from the description)
            const textToSpeak = "ä¾†è‡ªæ±æµ·å¤§å­¸æ™ºæ…§åŒ–è›‹é›èˆï¼Œæˆ‘å€‘æä¾›ç¬¦åˆå‹•ç‰©ç¦åˆ©æ¨™æº–ã€åš´æ ¼å“è³ªæ§ç®¡çš„æ–°é®®é›è›‹ã€‚æ¯ä¸€é¡†å‹•ç¦è›‹éƒ½æ‰¿è¼‰è‘—æˆ‘å€‘å°é›éš»å¥åº·èˆ‡é£Ÿå“å®‰å…¨çš„æ‰¿è«¾ã€‚";
            
            button.textContent = 'è¼‰å…¥èªéŸ³ä¸­...';
            button.disabled = true;

            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/${TTS_MODEL}:generateContent?key=${apiKey}`;
            const payload = {
                contents: [{
                    parts: [{ text: `ç”¨æµåˆ©çš„å°ç£ä¸­æ–‡ï¼Œä»¥æº«å’Œä¸”æ¸…æ™°çš„èªæ°£ï¼Œæœ—è®€ä»¥ä¸‹å…§å®¹: ${textToSpeak}` }]
                }],
                generationConfig: {
                    responseModalities: ["AUDIO"],
                    speechConfig: {
                        voiceConfig: {
                            prebuiltVoiceConfig: { voiceName: "Puck" } // A clear, upbeat voice
                        }
                    }
                }
            };

            let response;
            try {
                response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    throw new Error(`API returned status ${response.status}`);
                }
                const result = await response.json();
                const part = result?.candidates?.[0]?.content?.parts?.[0];
                const audioData = part?.inlineData?.data;
                const mimeType = part?.inlineData?.mimeType;

                if (audioData && mimeType && mimeType.startsWith("audio/")) {
                    const rateMatch = mimeType.match(/rate=(\d+)/);
                    const sampleRate = rateMatch ? parseInt(rateMatch[1], 10) : 16000;
                    
                    const pcmData = base64ToArrayBuffer(audioData);
                    const pcm16 = new Int16Array(pcmData);
                    const wavBlob = pcmToWav(pcm16, sampleRate);
                    const audioUrl = URL.createObjectURL(wavBlob);

                    // Play the audio
                    const audio = new Audio(audioUrl);
                    audio.play();
                    isPlaying = true;
                    
                    button.textContent = 'â¹ï¸ åœæ­¢æ’­æ”¾';
                    button.classList.remove('bg-farm-green', 'hover:bg-green-600');
                    button.classList.add('bg-red-500', 'hover:bg-red-600');

                    audio.onended = () => {
                        isPlaying = false;
                        button.textContent = originalText;
                        button.classList.remove('bg-red-500', 'hover:bg-red-600');
                        button.classList.add('bg-farm-green', 'hover:bg-green-600');
                        button.disabled = false;
                    };
                } else {
                    throw new Error('Invalid audio data received.');
                }

            } catch (error) {
                console.error("TTS Error:", error);
                alert('èªéŸ³æ’­æ”¾å¤±æ•—ã€‚è«‹æª¢æŸ¥æ‚¨çš„é€£ç·šã€‚'); // Using simple alert for error handling as per user preference (not using canvas API)
                button.textContent = originalText;
                button.disabled = false;
            } finally {
                if (!isPlaying) {
                    button.disabled = false;
                }
            }
        }
    </script>
</head>
<body class="text-gray-800">

    <!-- é ‚éƒ¨å°è¦½åˆ— (ç°¡å–®æ¨™é¡Œ) -->
    <header class="bg-farm-green text-cream-white shadow-lg sticky top-0 z-50">
        <div class="max-w-7xl mx-auto p-4 flex justify-between items-center">
            <!-- æ¨™é¡Œï¼šå·²æ›´æ–°ç‚ºã€Œæ±æµ·ç‰§å ´å‹•ç¦è›‹ã€ -->
            <h1 class="text-3xl font-bold tracking-wider">æ±æµ·ç‰§å ´å‹•ç¦è›‹</h1>
            <nav class="hidden md:flex space-x-6 text-lg">
                <a href="#intro" class="hover:text-egg-yellow transition duration-300">ç”¢å“ä»‹ç´¹</a>
                <a href="#features" class="hover:text-egg-yellow transition duration-300">ç‰¹è‰²å„ªå‹¢</a>
                <a href="#recipes" class="hover:text-egg-yellow transition duration-300">é£Ÿè­œé»å­</a>
                <a href="#contact" class="hover:text-egg-yellow transition duration-300">è¯çµ¡æˆ‘å€‘</a>
            </nav>
        </div>
    </header>

    <!-- 01. å°é¢ä¸»è¦–è¦ºå€ (Hero Section) -->
    <section id="intro" class="bg-cream-white py-16 md:py-24">
        <!-- å®¹å™¨èª¿æ•´ç‚º max-w-4xl ç¢ºä¿å…§å®¹ä¸æœƒéå¯¬ï¼Œä¸¦å±…ä¸­å°é½Š -->
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 flex flex-col items-center">
            <!-- æ–‡å­—å…§å®¹ - è¨­ç½®ç‚ºå…¨å¯¬ä¸¦æ–‡å­—å±…ä¸­ -->
            <div class="w-full text-center">
                <!-- å°æ¨™é¡Œ -->
                <span class="text-farm-green text-sm uppercase font-semibold tracking-widest block mb-2">æ±æµ·å¤§å­¸æ™ºæ…§åŒ–è›‹é›èˆ</span>
                
                <!-- å¤§æ¨™é¡Œï¼šå·²æ›´æ–°ç‚ºã€Œæ±æµ·ç‰§å ´å‹•ç¦è›‹ã€ -->
                <h2 class="text-5xl md:text-7xl font-extrabold leading-tight mb-6 text-gray-900">
                    æ±æµ·ç‰§å ´å‹•ç¦è›‹
                </h2>
                
                <!-- æè¿°æ–‡å­—ï¼šå·²æ ¹æ“šå‹•ç¦è›‹æ›´æ–°å…§å®¹ -->
                <p class="text-xl text-gray-600 mb-8 max-w-lg mx-auto">
                    ä¾†è‡ªæ±æµ·å¤§å­¸æ™ºæ…§åŒ–è›‹é›èˆï¼Œæˆ‘å€‘æä¾›ç¬¦åˆå‹•ç‰©ç¦åˆ©æ¨™æº–ã€åš´æ ¼å“è³ªæ§ç®¡çš„æ–°é®®é›è›‹ã€‚æ¯ä¸€é¡†å‹•ç¦è›‹éƒ½æ‰¿è¼‰è‘—æˆ‘å€‘å°é›éš»å¥åº·èˆ‡é£Ÿå“å®‰å…¨çš„æ‰¿è«¾ã€‚
                </p>

                <!-- èªéŸ³æ’­æ”¾æŒ‰éˆ• -->
                <button id="tts-button" onclick="generateAndPlayTTS()" 
                        class="tts-button bg-farm-green hover:bg-green-600 text-cream-white font-bold py-3 px-8 rounded-full shadow-xl transition duration-300 transform mb-8">
                    ğŸ—£ï¸ è½å–ç”¢å“ç°¡ä»‹
                </button>


                <!-- Email è¨‚é–±å€å¡Š -->
                <div class="mt-8 max-w-md mx-auto">
                    <p class="text-sm text-gray-700 mb-3 font-medium">è¼¸å…¥ä¿¡ç®±ï¼Œç«‹å³ç²å–æœ€æ–°å„ªæƒ èˆ‡æ ¡åœ’éŠ·å”®è³‡è¨Šï¼</p>
                    <div class="flex flex-col sm:flex-row gap-2">
                        <input type="email" id="interest-email" placeholder="æ‚¨çš„é›»å­éƒµä»¶åœ°å€" 
                            class="flex-grow p-3 rounded-lg border-2 border-gray-300 focus:border-farm-green focus:ring-farm-green shadow-md text-gray-800" required>
                        <button onclick="submitInterestForm()" 
                                class="bg-egg-yellow hover:bg-yellow-500 text-gray-900 font-bold py-3 px-6 rounded-lg shadow-lg transition duration-300 transform hover:scale-[1.02] active:scale-100 min-w-[120px]">
                            è¨‚é–±é€šçŸ¥
                        </button>
                    </div>
                    <p id="interest-message" class="mt-3 text-sm text-gray-600"></p>
                </div>
            </div>
        </div>
    </section>

    <!-- 02. ç‰¹è‰²å„ªå‹¢å€ (Features) -->
    <section id="features" class="bg-white py-16 md:py-20">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <h3 class="text-4xl font-extrabold mb-4 text-gray-900">æˆ‘å€‘çš„å››å¤§æ‰¿è«¾</h3>
            <p class="text-lg text-gray-600 mb-12">æ±æµ·é›è›‹ï¼Œå“è³ªæºè‡ªæ–¼å°ç´°ç¯€çš„å°ˆæ³¨èˆ‡æ„›è­·ã€‚</p>

            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <!-- ç‰¹è‰² 1: ç•¶æ—¥ç¾æ”¶ -->
                <div class="p-6 bg-farm-green/10 rounded-xl shadow-lg hover:shadow-xl transition duration-300">
                    <div class="text-4xl mb-4 text-farm-green">ğŸ¥š</div> <!-- é›è›‹åœ–ç¤º -->
                    <h4 class="text-xl font-bold mb-3">ç•¶æ—¥ç¾æ”¶</h4>
                    <p class="text-gray-600">é›è›‹æ¯æ—¥æ–°é®®æ¡é›†ï¼Œå¾è¾²å ´åˆ°æ‚¨æ‰‹ä¸­ï¼Œä¿ç•™æœ€ä½³è³å‘³æœŸé™ã€‚</p>
                </div>
                <!-- ç‰¹è‰² 2: å‹å–„é£¼é¤Š -->
                <div class="p-6 bg-farm-green/10 rounded-xl shadow-lg hover:shadow-xl transition duration-300">
                    <div class="text-4xl mb-4 text-farm-green">ğŸŒ³</div> <!-- æ¨¹/ç’°å¢ƒåœ–ç¤º -->
                    <h4 class="text-xl font-bold mb-3">å‹å–„é£¼é¤Š</h4>
                    <p class="text-gray-600">é›éš»ç”Ÿæ´»åœ¨å¯¬æ•ã€èˆ’é©çš„æ ¡åœ’å¯¦ç¿’è¾²å ´ï¼Œèº«å¿ƒå¥åº·ï¼Œç”¢å‡ºçš„è›‹æ›´å„ªè³ªã€‚</p>
                </div>
                <!-- ç‰¹è‰² 3: åš´æ ¼æŠŠé—œ -->
                <div class="p-6 bg-farm-green/10 rounded-xl shadow-lg hover:shadow-xl transition duration-300">
                    <div class="text-4xl mb-4 text-farm-green">ğŸ§ª</div> <!-- å¯¦é©—å®¤åœ–ç¤º -->
                    <h4 class="text-xl font-bold mb-3">åš´æ ¼æŠŠé—œ</h4>
                    <p class="text-gray-600">å®šæœŸé€²è¡Œå¾®ç”Ÿç‰©èˆ‡è—¥ç‰©æ®˜ç•™æª¢é©—ï¼Œç¢ºä¿æ¯ä¸€é¡†è›‹éƒ½å®‰å…¨ç„¡è™ã€‚</p>
                </div>
                <!-- ç‰¹è‰² 4: ç‡Ÿé¤Šæ»¿åˆ† -->
                <div class="p-6 bg-farm-green/10 rounded-xl shadow-lg hover:shadow-xl transition duration-300">
                    <div class="text-4xl mb-4 text-farm-green">ğŸ’ª</div> <!-- è‚Œè‚‰/å¥åº·åœ–ç¤º -->
                    <h4 class="text-xl font-bold mb-3">ç‡Ÿé¤Šæ»¿åˆ†</h4>
                    <p class="text-gray-600">è›‹é»ƒæ¿ƒéƒé£½æ»¿ï¼Œè›‹ç™½Qå½ˆé€æ˜ï¼Œæ˜¯æ‚¨èˆ‡å®¶äººå¥åº·é£²é£Ÿçš„æœ€ä½³é¸æ“‡ã€‚</p>
                </div>
            </div>
        </div>
    </section>

    <!-- 03. ç”¢å“å±•ç¤ºèˆ‡è©•åƒ¹ (Showcase & Testimonial Mock) -->
    <section class="bg-cream-white py-16 md:py-20">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <h3 class="text-4xl font-extrabold text-center mb-12 text-gray-900">ç”¢å“è¦æ ¼èˆ‡å£ç¢‘</h3>
            
            <div class="flex flex-col md:flex-row gap-10">
                <!-- ç”¢å“è³‡è¨Šå¡ç‰‡ -->
                <div class="md:w-1/2 bg-white p-8 rounded-xl shadow-2xl border-t-8 border-egg-yellow">
                    <h4 class="text-2xl font-bold mb-4 text-farm-green">æ±æµ·é›è›‹ï¼ˆæ ¡åœ’ç‰¹é¸ç´šï¼‰</h4>
                    <ul class="space-y-3 text-lg text-gray-700">
                        <li>âœ… è¦æ ¼ï¼šæ¯ç›’ 10 é¡†è£</li>
                        <li>âœ… ç­‰ç´šï¼šæ´—é¸ç‰¹ç´šé®®è›‹</li>
                        <li>âœ… å„²å­˜ï¼šå†·è—å¯ä¿å­˜ 21 å¤© (å»ºè­°ä¾åŒ…è£æ¨™ç¤º)</li>
                        <li>âœ… é©ç”¨ï¼šæ°´ç…®ã€ç…è›‹ã€çƒ˜ç„™ï¼Œç”¨é€”å»£æ³›</li>
                    </ul>
                    
                    <!-- åƒ¹æ ¼èˆ‡è³¼è²·å€åŸŸ - åŒ…å«å–®ç›’å’Œå„ªæƒ çµ„ -->
                    <div class="mt-6 space-y-4">
                        <!-- ç”¢å“é¸é … 1: å–®ç›’åƒ¹æ ¼ -->
                        <div class="flex justify-between items-center p-4 border border-farm-green rounded-lg bg-farm-green/5 shadow-inner">
                            <div>
                                <span class="text-lg font-semibold text-gray-900 block">ä¸€ç›’ (10é¡†)</span>
                                <span class="text-3xl font-bold text-farm-green">NT$ 110</span>
                            </div>
                            
                            <button onclick="addToCart('single')" class="bg-egg-yellow hover:bg-yellow-500 text-gray-900 font-bold py-3 px-6 rounded-lg shadow-lg transition duration-150 transform hover:scale-[1.02] active:scale-[0.98] flex items-center whitespace-nowrap">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
                                    <path fill-rule="evenodd" d="M10 2a4 4 0 00-4 4v.172a.5.5 0 00.128.354l.583.583a.5.5 0 00.354.128h6.812a.5.5 0 00.354-.128l.583-.583A.5.5 0 0014 6.172V6a4 4 0 00-4-4zm-6 4a.5.5 0 01.5-.5h11a.5.5 0 01.5.5v1H4V6zm11 3.5a.5.5 0 00-1 0v4.5a.5.5 0 001 0v-4.5zM5 9.5a.5.5 0 00-1 0v4.5a.5.5 0 001 0v-4.5z" clip-rule="evenodd" />
                                    <path d="M16 16.5a.5.5 0 01-.5.5h-11a.5.5 0 010-1h11a.5.5 0 01.5.5zM15.5 7H4.5A1.5 1.5 0 003 8.5v8A1.5 1.5 0 004.5 18h11a1.5 1.5 0 001.5-1.5v-8A1.5 1.5 0 0015.5 7z" />
                                </svg>
                                åŠ å…¥è³¼ç‰©è»Š
                            </button>
                        </div>

                        <!-- ç”¢å“é¸é … 2: å„ªæƒ çµ„åƒ¹æ ¼ (æ–°å¢ä¿ƒéŠ·æ¬„ä½) -->
                        <div class="flex justify-between items-center p-4 border-4 border-egg-yellow rounded-lg bg-egg-yellow/20 shadow-xl relative overflow-hidden">
                            <!-- ä¿ƒéŠ·æ¨™ç±¤ -->
                            <div class="absolute top-[-10px] right-[-40px] bg-red-500 text-white text-xs font-bold py-1 px-8 transform rotate-45 shadow-md">
                                å„ªæƒ 
                            </div>
                            <div>
                                <span class="text-lg font-semibold text-gray-900 block">äº”ç›’ (50é¡†) å„ªæƒ çµ„</span>
                                <span class="text-3xl font-bold text-red-600">NT$ 500</span>
                            </div>
                            
                            <button onclick="addToCart('bundle')" class="bg-red-500 hover:bg-red-600 text-cream-white font-bold py-3 px-6 rounded-lg shadow-lg transition duration-150 transform hover:scale-[1.02] active:scale-[0.98] flex items-center whitespace-nowrap">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
                                    <path fill-rule="evenodd" d="M10 2a4 4 0 00-4 4v.172a.5.5 0 00.128.354l.583.583a.5.5 0 00.354.128h6.812a.5.5 0 00.354-.128l.583-.583A.5.5 0 0014 6.172V6a4 4 0 00-4-4zm-6 4a.5.5 0 01.5-.5h11a.5.5 0 01.5.5v1H4V6zm11 3.5a.5.5 0 00-1 0v4.5a.5.5 0 001 0v-4.5zM5 9.5a.5.5 0 00-1 0v4.5a.5.5 0 001 0v-4.5z" clip-rule="evenodd" />
                                    <path d="M16 16.5a.5.5 0 01-.5.5h-11a.5.5 0 010-1h11a.5.5 0 01.5.5zM15.5 7H4.5A1.5 1.5 0 003 8.5v8A1.5 1.5 0 004.5 18h11a1.5 1.5 0 001.5-1.5v-8A1.5 1.5 0 0015.5 7z" />
                                </svg>
                                ç«‹å³æ¶è³¼
                            </button>
                        </div>
                    </div>
                    
                    <!-- è³¼ç‰©è»Šè¨Šæ¯æç¤º -->
                    <div id="cart-message" class="mt-4 p-3 opacity-0 transition duration-500"></div>

                </div>

                <!-- æ¨¡æ“¬é¡§å®¢è©•åƒ¹ - å¢åŠ äº†æ›´å¤šå›é¥‹ -->
                <div class="md:w-1/2 bg-white p-8 rounded-xl shadow-2xl border-t-8 border-farm-green">
                    <h4 class="text-2xl font-bold mb-4 text-egg-yellow">é¡§å®¢çœŸå¿ƒæ¨è–¦</h4>
                    
                    <!-- Testimonial 1 (Original) -->
                    <div class="mb-6 pb-4 border-b border-gray-100">
                        <blockquote class="italic text-gray-700 leading-relaxed border-l-4 border-egg-yellow pl-4">
                            ã€Œè›‹é»ƒçœŸçš„å¾ˆæ¿ƒéƒï¼Œç…èµ·ä¾†é¦™æ°£åè¶³ï¼å°æœ‹å‹åƒäº†éƒ½èªªè®šï¼Œæ„Ÿè¦ºåƒå¾—å¾ˆå®‰å¿ƒï¼Œæ”¯æŒåœ¨åœ°æ ¡åœ’è¾²ç”¢å“ï¼ã€
                        </blockquote>
                        <p class="mt-2 text-sm font-semibold text-gray-600">- ç‹å¤ªå¤ª (æ±æµ·æ•™è·å“¡å®¶å±¬)</p>
                    </div>

                    <!-- Testimonial 2 (New) -->
                    <div class="mb-6 pb-4 border-b border-gray-100">
                        <blockquote class="italic text-gray-700 leading-relaxed border-l-4 border-farm-green pl-4">
                            ã€Œè½èªªé›éš»æ˜¯å‹å–„é£¼é¤Šçš„ï¼Œç‰¹åœ°ä¾†è³¼è²·ã€‚å¯¦éš›åƒäº†ä¹‹å¾Œï¼Œè›‹ç™½å¾ˆQå½ˆï¼Œæ–°é®®åº¦æ²’è©±èªªï¼ŒCPå€¼å¾ˆé«˜ï¼ã€
                        </blockquote>
                        <p class="mt-2 text-sm font-semibold text-gray-600">- é™³åŒå­¸ (å­¸ç”Ÿ)</p>
                    </div>
                    
                    <!-- Testimonial 3 (New) -->
                    <div>
                        <blockquote class="italic text-gray-700 leading-relaxed border-l-4 border-egg-yellow pl-4">
                            ã€Œä½œç‚ºçƒ˜ç„™æ„›å¥½è€…ï¼Œæ±æµ·é›è›‹çš„è›‹æ¶²æ‰“ç™¼æ€§å¾ˆå¥½ï¼Œåšå‡ºä¾†çš„è›‹ç³•å’Œå¸ƒä¸å£æ„Ÿç‰¹åˆ¥ç´°ç·»ï¼Œæ˜¯çƒ˜ç„™çš„ç§˜å¯†æ­¦å™¨ã€‚ã€
                        </blockquote>
                        <p class="mt-2 text-sm font-semibold text-gray-600">- æå…ˆç”Ÿ (æ ¡å‹)</p>
                    </div>

                </div>
            </div>
            
            <!-- æ–°å¢ï¼šç•™ä¸‹æ‚¨çš„å›é¥‹æ¬„ä½ (Simulated Submission) -->
            <div class="mt-12 p-8 bg-white rounded-xl shadow-2xl border-t-8 border-farm-green">
                <h4 class="text-2xl font-bold mb-4 text-farm-green">ğŸ–‹ï¸ ç•™ä¸‹æ‚¨çš„å›é¥‹</h4>
                <p class="text-gray-600 mb-4">æ‚¨çš„å¯¶è²´æ„è¦‹æ˜¯æˆ‘å€‘é€²æ­¥çš„å‹•åŠ›ã€‚è«‹åˆ†äº«æ‚¨å°æ±æµ·ç‰§å ´å‹•ç¦è›‹çš„é«”é©—ã€‚</p>
                
                <form onsubmit="submitTestimonial(event)">
                    <div class="mb-4">
                        <label for="feedback-name" class="block text-sm font-medium text-gray-700 mb-1">æ‚¨çš„æš±ç¨±</label>
                        <input type="text" id="feedback-name" placeholder="ç‹åŒå­¸ / æå¤ªå¤ª" required
                               class="w-full p-3 rounded-lg border-2 border-gray-300 focus:border-egg-yellow focus:ring-egg-yellow shadow-sm">
                    </div>
                    <div class="mb-4">
                        <label for="feedback-content" class="block text-sm font-medium text-gray-700 mb-1">å›é¥‹å…§å®¹</label>
                        <textarea id="feedback-content" rows="4" placeholder="è«‹å‘Šè¨´æˆ‘å€‘æ‚¨çš„ä½¿ç”¨é«”é©—æˆ–æ„è¦‹..." required
                                  class="w-full p-3 rounded-lg border-2 border-gray-300 focus:border-egg-yellow focus:ring-egg-yellow shadow-sm"></textarea>
                    </div>
                    <button type="submit" id="feedback-submit-btn"
                            class="bg-farm-green hover:bg-green-600 text-cream-white font-bold py-3 px-6 rounded-lg shadow-lg transition duration-150 transform hover:scale-[1.02] active:scale-[0.98] w-full md:w-auto">
                        é€å‡ºå›é¥‹
                    </button>
                </form>

                <p id="testimonial-message" class="mt-4 text-sm font-semibold text-gray-700">æˆ‘å€‘å°‡å¯©æ ¸æ‚¨çš„å›é¥‹å¾Œï¼Œæ“‡å„ªç™¼ä½ˆåœ¨ç¶²ç«™ä¸Šã€‚æ„Ÿè¬æ‚¨çš„æ”¯æŒï¼</p>
            </div>
        </div>
    </section>

    <!-- 04. é£Ÿè­œé»å­ç”Ÿæˆå™¨ (Recipe Generator) -->
    <section id="recipes" class="bg-white py-16 md:py-20">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
            <h3 class="text-4xl font-extrabold text-center mb-4 text-gray-900">âœ¨ å‰µæ„é£Ÿè­œé»å­</h3>
            <p class="text-lg text-gray-600 text-center mb-8">è¼¸å…¥æ‚¨å®¶ä¸­çš„å…¶ä»–é£Ÿæï¼Œè®“ AI ç‚ºæ‚¨é‡èº«æ‰“é€ ç¾å‘³çš„ã€Œæ±æµ·é›è›‹ã€æ–™ç†ï¼</p>
            
            <div class="bg-farm-green/10 p-6 rounded-xl shadow-xl">
                <label for="recipe-ingredients" class="block text-lg font-medium text-gray-800 mb-2">æ‚¨é‚„æœ‰ä»€éº¼é£Ÿæï¼Ÿ (ä¾‹å¦‚: é†¬æ²¹ã€é’è”¥ã€åå¸ã€ç•ªèŒ„)</label>
                <div class="flex flex-col sm:flex-row gap-4">
                    <input type="text" id="recipe-ingredients" placeholder="è¼¸å…¥é£Ÿææ¸…å–®..." 
                        class="flex-grow p-3 rounded-lg border-2 border-farm-green focus:ring-farm-green text-gray-800 shadow-md">
                    <button id="recipe-button" onclick="generateRecipeIdeas()" 
                            class="bg-egg-yellow hover:bg-yellow-500 text-gray-900 font-bold py-3 px-6 rounded-lg shadow-lg transition duration-300 transform hover:scale-[1.02] active:scale-100 min-w-[150px] flex items-center justify-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
                            <path d="M17.293 8.293a1 1 0 011.414 1.414l-8 8a1 1 0 01-1.414 0l-8-8a1 1 0 011.414-1.414L10 14.586l7.293-7.293z" />
                        </svg>
                        ç”Ÿæˆé£Ÿè­œ
                    </button>
                </div>
                
                <!-- è¼‰å…¥ä¸­å‹•ç•« -->
                <div id="recipe-loading" class="hidden text-center mt-6">
                    <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-farm-green inline-block"></div>
                    <p class="text-farm-green mt-2">AI æ–™ç†å¤§å¸«æ­£åœ¨æ€è€ƒä¸­...</p>
                </div>

                <!-- é£Ÿè­œçµæœå€åŸŸ -->
                <div id="recipe-results" class="mt-6 space-y-4">
                    <!-- Results will be injected here -->
                </div>
            </div>
        </div>
    </section>

    <!-- 05. è¯çµ¡èˆ‡è³¼è²·è³‡è¨Š (Contact & Footer) -->
    <footer id="contact" class="bg-gray-800 text-cream-white py-12 md:py-16">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <h3 class="text-3xl font-bold mb-6 text-egg-yellow">å¦‚ä½•è³¼è²·æˆ–è¯çµ¡æˆ‘å€‘</h3>
            <p class="text-lg mb-8 max-w-xl mx-auto">
                æ±æµ·é›è›‹ä¸»è¦æ–¼æ ¡å…§ç‰¹å®šé€šè·¯è²©å”®ï¼Œæˆ–æ´½è©¢å¯¦ç¿’è¾²ç‰§å ´ã€‚æ­¡è¿è¯ç¹«æˆ‘å€‘äº†è§£æ›´å¤šåœ˜è³¼è³‡è¨Šã€‚
            </p>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-8 text-left max-w-4xl mx-auto">
                <!-- è¯çµ¡æ–¹å¼ -->
                <div class="p-4 bg-gray-700 rounded-lg shadow-inner">
                    <p class="font-bold text-farm-green mb-1">é›»è©±</p>
                    <p> (04)23590121 #37110 </p>
                </div>
                <!-- é›»å­éƒµä»¶ -->
                <div class="p-4 bg-gray-700 rounded-lg shadow-inner">
                    <p class="font-bold text-farm-green mb-1">Email</p>
                    <p>egg@thu.edu.tw</p>
                </div>
                <!-- è³¼è²·åœ°é» -->
                <div class="p-4 bg-gray-700 rounded-lg shadow-inner">
                    <p class="font-bold text-farm-green mb-1">ä¸»è¦è³¼è²·åœ°é»</p>
                    <p>æ±æµ·å¤§å­¸ç•œç”¢ç³»è¾¦å…¬å®¤</p>
                </div>
            </div>
            
            <!-- ç‰ˆæ¬Šè³‡è¨Š -->
            <div class="mt-12 pt-6 border-t border-gray-700">
                <p class="text-sm text-gray-400">
                    &copy; 2025 æ±æµ·å¤§å­¸å¯¦ç¿’è¾²ç‰§å ´ ç‰ˆæ¬Šæ‰€æœ‰ã€‚
                </p>
            </div>
        </div>
    </footer>

    <!-- Script for Recipe Generator -->
    <script>
        async function generateRecipeIdeas() {
            const ingredientsInput = document.getElementById('recipe-ingredients');
            const resultsDiv = document.getElementById('recipe-results');
            const loadingDiv = document.getElementById('recipe-loading');
            const button = document.getElementById('recipe-button');
            const userIngredients = ingredientsInput.value.trim();

            if (!userIngredients) {
                resultsDiv.innerHTML = '<p class="text-red-500">è«‹è¼¸å…¥æ‚¨æ“æœ‰çš„é£Ÿæï¼Œä¾‹å¦‚ï¼šé†¬æ²¹ã€é’è”¥ã€‚</p>';
                return;
            }

            resultsDiv.innerHTML = '';
            loadingDiv.classList.remove('hidden');
            button.disabled = true;

            const systemPrompt = "ä½ æ˜¯ä¸€ä½å°ˆé–€ç‚ºå°ç£å®¶åº­è¨­è¨ˆé£Ÿè­œçš„å°ˆæ¥­å»šå¸«ã€‚ä½ çš„ä»»å‹™æ˜¯æ ¹æ“šç”¨æˆ¶æä¾›çš„é£Ÿæï¼Œä»¥ã€æ±æµ·é›è›‹ã€ç‚ºä¸»è¦ææ–™ï¼Œè¨­è¨ˆ3å€‹å‰µæ„ä¸”å¯¦ç”¨çš„é£Ÿè­œã€‚é£Ÿè­œåç¨±å¿…é ˆæ˜¯ç¹é«”ä¸­æ–‡ã€‚é£Ÿè­œæ‡‰æ¸…æ™°åˆ—å‡ºæ‰€æœ‰æ­¥é©Ÿã€‚";
            const userQuery = `æˆ‘ç›®å‰æœ‰çš„é£Ÿææœ‰ï¼š${userIngredients}ã€‚è«‹ç‚ºæˆ‘è¨­è¨ˆ3å€‹ä»¥æ±æµ·é›è›‹ç‚ºä¸»çš„é£Ÿè­œã€‚`;
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/${RECIPE_MODEL}:generateContent?key=${apiKey}`;

            // Define the JSON structure for the response
            const responseSchema = {
                type: "ARRAY",
                items: {
                    type: "OBJECT",
                    properties: {
                        "recipeName": { "type": "STRING", description: "é£Ÿè­œçš„å‰µæ„åç¨±" },
                        "description": { "type": "STRING", description: "é£Ÿè­œçš„ç°¡çŸ­ä»‹ç´¹" },
                        "ingredients": {
                            "type": "ARRAY",
                            "items": { "type": "STRING" },
                            description: "é£Ÿè­œæ‰€éœ€ææ–™æ¸…å–®"
                        },
                        "steps": {
                            "type": "ARRAY",
                            "items": { "type": "STRING" },
                            description: "é£Ÿè­œçš„è©³ç´°æ­¥é©Ÿèªªæ˜"
                        }
                    }
                }
            };

            const payload = {
                contents: [{ parts: [{ text: userQuery }] }],
                systemInstruction: { parts: [{ text: systemPrompt }] },
                generationConfig: {
                    responseMimeType: "application/json",
                    responseSchema: responseSchema
                },
            };

            try {
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    throw new Error(`API returned status ${response.status}`);
                }

                const result = await response.json();
                const jsonText = result?.candidates?.[0]?.content?.parts?.[0]?.text;
                
                if (!jsonText) {
                    throw new Error("æœªèƒ½å¾ AI ç²å–æœ‰æ•ˆçš„ JSON é£Ÿè­œã€‚");
                }
                
                const recipes = JSON.parse(jsonText);
                let htmlContent = '';

                recipes.forEach((recipe, index) => {
                    // Start Card for Recipe
                    htmlContent += `
                        <div class="bg-white p-6 rounded-xl shadow-lg border-l-4 ${index % 2 === 0 ? 'border-egg-yellow' : 'border-farm-green'}">
                            <h4 class="text-xl font-bold text-gray-900 mb-2">${index + 1}. ${recipe.recipeName}</h4>
                            <p class="text-gray-600 italic mb-4">${recipe.description}</p>
                            
                            <!-- Ingredients -->
                            <div class="mb-4">
                                <p class="font-semibold text-farm-green">ğŸ³ ä¸»è¦ææ–™:</p>
                                <ul class="list-disc list-inside text-sm text-gray-700 ml-4">
                                    ${recipe.ingredients.map(ing => `<li>${ing}</li>`).join('')}
                                </ul>
                            </div>
                            
                            <!-- Steps -->
                            <div>
                                <p class="font-semibold text-farm-green">ğŸ“ æ–™ç†æ­¥é©Ÿ:</p>
                                <ol class="list-decimal list-inside text-sm text-gray-700 ml-4 space-y-1">
                                    ${recipe.steps.map(step => `<li>${step}</li>`).join('')}
                                </ol>
                            </div>
                        </div>
                    `;
                });

                resultsDiv.innerHTML = htmlContent;

            } catch (error) {
                console.error("é£Ÿè­œç”ŸæˆéŒ¯èª¤:", error);
                resultsDiv.innerHTML = `<p class="text-red-500">é£Ÿè­œç”Ÿæˆå¤±æ•—ã€‚è«‹æª¢æŸ¥æ‚¨çš„é€£ç·šæˆ–ç¨å¾Œå†è©¦ã€‚ (${error.message})</p>`;
            } finally {
                loadingDiv.classList.add('hidden');
                button.disabled = false;
            }
        }
    </script>
</body>
</html>



